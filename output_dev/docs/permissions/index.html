<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <meta name="description" content="Documentation for Devise">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Permissions &mdash; Devise Documentation &mdash; </title>

    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/magnific-popup.css"/>
    <link rel="stylesheet" type="text/css" href="/css/main.css">

    <script src="/js/vendor/modernizr-2.8.3.min.js"></script>

</head>

<body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <nav>
            <ul>
                <li><a href="/">
                    <img src="/imgs/nav-logo.png" width="49" height="17" alt="Devise Logo">
                </a></li>

                <li>
                    <a class="" href="https://github.com/devisephp">Github</a>
                    <ul>
                        <li><a class="" href="https://github.com/devisephp/cms">CMS (Core Package)</a></li>
                        <li><a class="" href="https://github.com/devisephp/bootstrap">Bootstrap (Boilerplate)</a></li>
                        <li><a class="" href="https://github.com/devisephp/example">Example Project</a></li>
                    </ul>
                </li>

                <li>
                    <a class="" href="/docs">Documentation</a>
                </li>

                <li>
                    <a class="" href="#">Features</a>
                    <ul>
                        <li><a class="" href="/content-management-features">CMS Features</a></li>
                        <li><a class="" href="/advanced-features">Advanced Features</a></li>
                    </ul>
                </li>

                <li>
                    <a class="dvs-active" href="/">Home</a>
                </li>

            </ul>
        </nav>

        <div id="content-wrapper">

            <header><img src="/imgs/documentation-header-bg.jpg" width="100%"></header>

            <section id="top">
                <div>
                    <h1>Permissions</h1>
                    <p>There are two types of permissions that you can use: _**permission rules**_ (regular PHP functions that you register with us) and _**permission conditions**_. Permissions conditions use multiple permission rules to see if a user is allowed to see or use a particular feature of your web application.</p>
                </div>
            </section>

            <section id="sculpin-docs">
                <ul>
                    <li >
                        <a href="/docs">About Devise</a>
                        <ul>
                            <li><a href="/docs#what-is-it">What Is It?</a></li>
                            <li><a href="/docs#couple-of-demos">Couple of Demos</a></li>
                        </ul>
                    </li>
                                        <li>
                        <a href="/docs/about-this-documentation/">About This Documentation</a>
                                                <ul>
                                                        <li><a href="/docs/about-this-documentation/#code-blocks">Code Blocks</a></li>
                                                        <li><a href="/docs/about-this-documentation/#achtung%21">Achtung!</a></li>
                                                        <li><a href="/docs/about-this-documentation/#beer%21">Beer!</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/installation/">Installation</a>
                                                <ul>
                                                        <li><a href="/docs/installation/#requirements">Requirements</a></li>
                                                        <li><a href="/docs/installation/#installing-through-the-browser">Installing through the browser</a></li>
                                                        <li><a href="/docs/installation/#installing-through-command-line">Installing through command line</a></li>
                                                        <li><a href="/docs/installation/#environmental-configuration">Environmental Configuration</a></li>
                                                        <li><a href="/docs/installation/#mail-and-additional-configuration">Mail and Additional Configuration</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/pages/">Pages</a>
                                                <ul>
                                                        <li><a href="/docs/pages/#pages-and-routing">Pages and Routing</a></li>
                                                        <li><a href="/docs/pages/#creating-new-pages">Creating New Pages</a></li>
                                                        <li><a href="/docs/pages/#managing-pages">Managing Pages</a></li>
                                                        <li><a href="/docs/pages/#understanding-page-versions">Understanding page versions</a></li>
                                                        <li><a href="/docs/pages/#sharing-an-unpublished-page-with-a-non-admin">Sharing An Unpublished Page With A Non-Admin</a></li>
                                                        <li><a href="/docs/pages/#working-with-the-calendar">Working with the Calendar</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/apis/">Apis</a>
                                                <ul>
                                                        <li><a href="/docs/apis/#creating-new-apis">Creating New Apis</a></li>
                                                        <li><a href="/docs/apis/#managing-apis">Managing Apis</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/templates/">Templates</a>
                                                <ul>
                                                        <li><a href="/docs/templates/#creating-new-templates">Creating New Templates</a></li>
                                                        <li><a href="/docs/templates/#introduction-to-blade-syntax">Introduction to Blade Syntax</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/fields/">Fields</a>
                                                <ul>
                                                        <li><a href="/docs/fields/#creating-your-first-editable-area">Creating Your First Editable Area</a></li>
                                                        <li><a href="/docs/fields/#simple-field">Simple Field</a></li>
                                                        <li><a href="/docs/fields/#grouping-fields">Grouping Fields</a></li>
                                                        <li><a href="/docs/fields/#collections-of-fields">Collections of Fields</a></li>
                                                        <li><a href="/docs/fields/#editing-models">Editing Models</a></li>
                                                        <li><a href="/docs/fields/#to-model-or-not-to-model">To Model Or Not To Model</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/field-types/">Field Types</a>
                                                <ul>
                                                        <li><a href="/docs/field-types/#audio">Audio</a></li>
                                                        <li><a href="/docs/field-types/#checkbox">Checkbox</a></li>
                                                        <li><a href="/docs/field-types/#checkbox-group">Checkbox Group</a></li>
                                                        <li><a href="/docs/field-types/#color">Color</a></li>
                                                        <li><a href="/docs/field-types/#date%2Ftime">Date/Time</a></li>
                                                        <li><a href="/docs/field-types/#file">File</a></li>
                                                        <li><a href="/docs/field-types/#hidden">Hidden</a></li>
                                                        <li><a href="/docs/field-types/#html">HTML</a></li>
                                                        <li><a href="/docs/field-types/#images">Images</a></li>
                                                        <li><a href="/docs/field-types/#link">Link</a></li>
                                                        <li><a href="/docs/field-types/#map">Map</a></li>
                                                        <li><a href="/docs/field-types/#select">Select</a></li>
                                                        <li><a href="/docs/field-types/#text">Text</a></li>
                                                        <li><a href="/docs/field-types/#textarea">Textarea</a></li>
                                                        <li><a href="/docs/field-types/#video">Video</a></li>
                                                        <li><a href="/docs/field-types/#wysiwyg">WYSIWYG</a></li>
                                                    </ul>
                                            </li>
                                        <li class="active">
                        <a href="/docs/permissions/">Permissions</a>
                                                <ul>
                                                        <li class="active" ><a href="/docs/permissions/#preloaded-permission-rules">Preloaded Permission Rules</a></li>
                                                        <li class="active" ><a href="/docs/permissions/#implementing-in-templates">Implementing In Templates</a></li>
                                                        <li class="active" ><a href="/docs/permissions/#implementing-on-pages">Implementing On Pages</a></li>
                                                        <li class="active" ><a href="/docs/permissions/#implementing-in-routes">Implementing In Routes</a></li>
                                                        <li class="active" ><a href="/docs/permissions/#creating-new-permission-rules">Creating New Permission Rules</a></li>
                                                        <li class="active" ><a href="/docs/permissions/#creating-new-permission-conditions">Creating New Permission Conditions</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/menus/">Menus</a>
                                                <ul>
                                                        <li><a href="/docs/menus/#managing-menus">Managing Menus</a></li>
                                                        <li><a href="/docs/menus/#implementing-menus">Implementing Menus</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/users-groups/">Users &amp; Groups</a>
                                                <ul>
                                                        <li><a href="/docs/users-groups/#building-a-philosophy-for-your-app">Building A Philosophy For Your App</a></li>
                                                        <li><a href="/docs/users-groups/#enabling-user-registration">Enabling User Registration</a></li>
                                                        <li><a href="/docs/users-groups/#password-recovery">Password Recovery</a></li>
                                                        <li><a href="/docs/users-groups/#managing-users">Managing Users</a></li>
                                                        <li><a href="/docs/users-groups/#managing-groups">Managing Groups</a></li>
                                                    </ul>
                                            </li>
                                        <li>
                        <a href="/docs/localization/">Localization</a>
                                                <ul>
                                                        <li><a href="/docs/localization/#enabling-a-new-language">Enabling A New Language</a></li>
                                                        <li><a href="/docs/localization/#static-vs-dynamic">Static vs Dynamic</a></li>
                                                    </ul>
                                            </li>
                                    </ul>

                <div>
                    <div>
                        <h2 id="%3Ca-name%3D%22preloaded-permission-rules%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23preloaded-permission-rules%29preloaded-permission-rules"><a name="preloaded-permission-rules" class="ia"></a><a href="#preloaded-permission-rules">#</a>Preloaded Permission Rules</h2>

<p>Devise comes preloaded with several permission rules that are fairly common in applications our team builds. You may use these in templates or in permission conditions without having to do anything extra.</p>

<pre><code class="php">
isLoggedIn();
isNotLoggedIn();
isInGroup($groupname);
isNotInGroup($groupname);
hasUserName($username); // Will check both name and email
hasEmail($email);
hasFieldValue($field, $value); // Tests any property of the user

</code></pre>

<h6 id="preloaded-permission-rules">Preloaded permission rules</h6>

<h2 id="%3Ca-name%3D%22implementing-in-templates%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23implementing-in-templates%29implementing-in-templates"><a name="implementing-in-templates" class="ia"></a><a href="#implementing-in-templates">#</a>Implementing In Templates</h2>

<h4 id="using-permission-functions">Using Permission Functions</h4>

<p>To hide or show a specific part of a template based on a permission function you will need to something like the following:</p>

<pre><code class="php">
@if(DeviseUser::checkRule('isInGroup', ['Super Administrator']))
    &lt;a href="/secret-beer-stash"&gt;The secret beer stash!&lt;/a&gt;
@endif

</code></pre>

<pre><code class="php">
@if(DeviseUser::isInGroup('Super Administrators'))
    &lt;a href="/secret-beer-stash"&gt;The secret beer stash!&lt;/a&gt;
@endif

</code></pre>

<h6 id="or-the-shorthand...">Or the shorthand...</h6>

<h4 id="using-permission-conditions">Using Permission Conditions</h4>

<pre><code class="php">
@if(DeviseUser::checkConditions('isBeerDrinker'))
    &lt;h1&gt;Beer Drinkers Only!&lt;/h1&gt;
@endif

</code></pre>

<h6 id="checking-a-single-condition">Checking a single condition</h6>

<pre><code class="php">
@if(DeviseUser::checkConditions(
    array(
        'isLoggedIn',
        'isDeviseAdmin',
        'isNotAppAdmin',
        'isNotEditor'
        )
    )
)
    &lt;ul&gt;
        &lt;li&gt;{{ link_to(URL::route('create-page'), 'Create New Page', array('class'=&gt;'button')) }}&lt;/li&gt;
    &lt;/ul&gt;
@endif

</code></pre>

<h6 id="checking-multiple-conditions">Checking multiple conditions</h6>

<pre><code class="php">
@if(
    !DeviseUser::checkConditions('isLoggedIn') &amp;&amp;
    DeviseUser::checkConditions(
        array(
            'isDeviseAdmin',
            'isNotAppAdmin'
        )
    )
)
    {{ link_to(
        URL::route('create-page'),
        'Create New Page',
        array('class'=&gt;'button')
    ) }}
@endif

</code></pre>

<h6 id="advanced-example">Advanced example</h6>

<h2 id="%3Ca-name%3D%22implementing-on-pages%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23implementing-on-pages%29implementing-on-pages"><a name="implementing-on-pages" class="ia"></a><a href="#implementing-on-pages">#</a>Implementing On Pages</h2>

<p>To implement permissions on Devise pages you can do it by adding your permission condition (or conditions) to the before filter in the advanced settings of the page in the administration. You can also pass multiple permission conditions by separating them with a pipe. For example<code>permissionCondition1|permissionCondition2</code>.</p>

<blockquote>
  <h4 id="note">Note</h4>
  
  <ul>
  <li>If you pass multiple conditions all conditions must be true for the user to view the page.</li>
  <li>There is no way to pass a permission rule into this field, only conditions.</li>
  <li><em>Where</em> the user is redirected to along with the message is set in the permission settings.</li>
  </ul>
</blockquote>

<h2 id="%3Ca-name%3D%22implementing-in-routes%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23implementing-in-routes%29implementing-in-routes"><a name="implementing-in-routes" class="ia"></a><a href="#implementing-in-routes">#</a>Implementing In Routes</h2>

<p>Implementing permissions (rules or conditions) in <code>routes.php</code> works the same way they work in templates. Just redirect the user somewhere like so:</p>

<pre><code class="php">
if(DeviseUser::checkRule('isInGroup', ['Super Administrator'])){
    Route::get('user/profile', array('as' =&gt; 'profile', 'uses' =&gt; 'UserController@showProfile'));
}

</code></pre>

<blockquote>
  <h4 id="we-already-registered-your-permission-conditions">We Already Registered Your Permission Conditions</h4>
  
  <p>Any permission conditions that you have created are already registered as filters so you can feel free to use them as you wish. For more information on filters see the <a href="http://laravel.com/docs/5.0/middleware#registering-middleware">laravel documentation on filters</a></p>
</blockquote>

<pre><code class="php">

Route::get('face', array('before'=&gt;'canAccessAdmin'));


</code></pre>

<h2 id="%3Ca-name%3D%22creating-new-permission-rules%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23creating-new-permission-rules%29creating-new-permission-rules"><a name="creating-new-permission-rules" class="ia"></a><a href="#creating-new-permission-rules">#</a>Creating New Permission Rules</h2>

<blockquote>
  <blockquote>
    <h4 id="one-rule-about-permission-functions">One rule about permission functions</h4>
    
    <p>All permission functions must return a boolean response to work correctly.</p>
  </blockquote>
</blockquote>

<pre><code class="php">
//Let's add another rule called doesDrinkBourbon
RuleManager::addRule('doesDrinkBourbon', function() {
    return true;
});

</code></pre>

<h6 id="without-parameters">Without parameters</h6>

<pre><code class="php">
//Let's add another rule called doesDrinkBourbon
RuleManager::addRule('drinksRightTypeOfBeer', function($type) {
    return $type == 'stout';
});

</code></pre>

<h6 id="with-a-parameter">With a parameter</h6>

<p>Below is an example of where you might want to register these rules. You can do it many places but this might be a good place to start if you just have a rule or two.</p>

<pre><code class="php">
class AppServiceProvider extends ServiceProvider {
    /**
     * Bootstrap any application services.
     *
     * @return void
     */
    public function boot()
    {
        //Let's add a rule called doesDrinkBeer
        RuleManager::addRule('doesDrinkBeer', function() {
            return true;
        });

        //Let's add another rule called doesDrinkBourbon
        RuleManager::addRule('doesDrinkBourbon', function() {
            // You'll need some actual logic in here
            return false;
        });
    }

    ...

}

</code></pre>

<h6 id="%60%60%60%2Fapp%2Fproviders%2Fappserviceprovider.php%60%60%60"><code>/app/Providers/AppServiceProvider.php</code></h6>

<h2 id="%3Ca-name%3D%22creating-new-permission-conditions%22-class%3D%22ia%22%3E%3C%2Fa%3E%5B%23%5D%28%23creating-new-permission-conditions%29creating-new-permission-conditions"><a name="creating-new-permission-conditions" class="ia"></a><a href="#creating-new-permission-conditions">#</a>Creating New Permission Conditions</h2>

<p>Permission conditions use one or multiple permission rules to create a conditional formula that will return a true or false determining if a client has whatever they need to load a route or see a particular portion of a page.</p>

<p>To create a permission formula log in to the administration of your Devise application and click on, you guessed it, "Permissions". Here you can construct conditions using the web-based UI to combine the registered permission rules with <code>AND / OR</code> statements. This gives you an amazing amount of freedom to combine small/broad permissions to make very specific rules.</p>
                    </div>
                </div>

            </section>

        </div>

    <section id="bottom">
        Devise Logo and Devisephp.com<br>
        Copyright &copy; 2015 <a href="http://lbm.co" target="_blank">LBM</a><br><br>

        Devise content management system source code under <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a><br>
        <em>"Impediment to action advances action.<br> What stands in the way becomes the way"<em>
        </section>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.11.3.min.js"><\/script>')</script>
        <script src="/js/vendor/retina.min.js"></script>
        <script src="/js/vendor/jquery.magnific-popup.min.js"></script>
        <script src="/js/vendor/highlight.pack.js"></script>
        <script src="/js/main.js"></script>

        <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='https://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-59653511-1','auto');ga('send','pageview');
        </script>

    </body>
    </html>
